# WebAPI第一天  DOM

## 目标 ：动态修改网页的内容和样式

- [x] 能说出API和WebAPI的概念与作用
- [x] 能说出什么是DOM和节点
- [x] 能根据id获取元素对象
- [x] 能根据标签名获取元素对象
- [x] 能根据类名获取元素对象
- [x] 能使用on的方式注册事件
- [ ] 能获取和修改标签的标准属性
- [ ] 能通过style和className 、classList修改元素的样式
- [ ] 能获取和修改标签的自定义属性

## 1. DOM 与 DOM 树的概念

> 目标：知道DOM是什么，有什么作用、 知道 HTML 在浏览器中的存储结构

### 1.1 DOM

* **官方定义**：文档对象模型（document object model）是 [W3C](https://baike.baidu.com/item/W3C) 组织 推荐的处理html或者xhtml的标准[编程接口]
* **大白话描述**：就是别人封装好的**操作html**的方法，我们直接调用即可  比如：设置html中的某个标签的背景色
* **作用**：
  * 修改网页的内容、样式、结构
  * 响应用户对网页的操作 
* **用法**：函数调用的方式   如：获取元素 document.getElementById('id')

 ### 1.2 DOM树

* **描述**：当创建了一个网页并把它加载到Web浏览器中时，DOM就在幕后悄然而生了。它把你编写的网页文档转换成为一个文档**对象**
* **作用**：
  * 树结构清晰，方便浏览器存储
  * 把html内容都转换成对象，方便js语句操作
* **结构**：

​       <img src='image/2.png'>

* **组成**：
  * **文档**：一个页面就是一个文档，DOM 中使用 document 表示 
  * **元素**：页面中的所有标签都是元素，DOM 中使用 element 表示 
  * **节点**：网页中的所有内容都是节点（标签、属性、文本、注释等），DOM 中使用 node 表示

​           **文档、元素、节点都被看成对象**

​	

## 2. 获取元素

> 目标：能够通过id属性获取元素、能够通过标签名获取元素、能够通过类名获取元素、获取body元素     

**操作页面元素的步骤**：① 获取需要操作的元素 ② 操作元素的属性

**获取元素的套路**：① 在某个元素对象中元素查找具体元素  ② 调用方法的方式

### 2.1 通过id获取元素 

* **语法**：`document.getElementById('id')`
* **参数**
  
  * 类型：字符串
  * 值：id属性值
* **返回**
  
  * 类型：对象
  * 值：具有该id属性值的元素
* **例子**

  ```html
  1. 创建一个id属性值是'user'的div元素
  2. 通过 document.getElementById('id') 语法获取元素，并查看元素
  ```

### 2.2 通过标签名获取元素

* **语法**：`element.getElementsByTagName('标签名')`
* **参数**
  
  * 类型：字符串
  * 值：标签名
* **返回** 
  
  * 类型： **伪数组**
  * 值：符合要求的元素对象的集合
* **注意**
  
  * `getElementsByTagName()`    element+s 因为元素有多个
  * 不一定是在document下获取，也可以在其他元素下获取某一类标签元素
  * 返回数据是伪数组数数据
    1. 想要获取某个具体元素对象需要使用下标 `element.getElementsByTagName('标签名')[index]`
    2. 获取伪数组中含有元素对象的个数 `element.getElementsByTagName('标签名').length`
    3. 可通过for循环的方式获取每一个元素 `for(var i = 0;i<elements.length;i++){elements[i]}`
    4. 由于是伪数组，所以不能使用数组的内置方法
  
* **例子**

  ```html
  1.创建两个ul，id分别为'first' 和 'second',在ul内部分别创建4个li
  2.获取所有li，获取'second'中的第二个li
  ```

### 2.3 通过类名获取元素

* **语法**：`element.getElementsByClassName(‘类名’)`
* **参数**
  
  * 类型：字符串
  * 值：class属性值
* **返回** 
  
  * 类型：**伪数组**
  * 值：符合要求的元素对象的集合
* **注意**
  
  * `getElementsByClassName()`     因为元素有多个  所以element+s
  * 不一定是在document下获取，也可以在其他元素下获取某一类标签元素
  * 返回数据是伪数组数数据
    1. 想要获取某个具体元素对象需要使用下标 `element.getElementsByClassName('标签名')[index]`
    2. 获取伪数组中含有元素对象的个数 `element.getElementsByClassName('标签名').length`
    3. 可通过for循环的方式获取每一个元素 `for(var i = 0;i<elements.length;i++){elements[i]}
    4. 由于是伪数组，所以不能使用数组的内置方法
  
* **例子**

  ```html
  1.创建两个ul,,在ul内部分别创建4个li
  2.获取'second'中的所有li
  ```
  

### 2.4 获取body元素

* **语法**：`document.body`

* **返回**
  
  * 类型：对象
* 值：body元素
  
* **例子**

  ```html
  <body>
      我是body
      <div>我是div</div>
      <script>
  		console.log(document.body) 
  	</script>
  </body>
  ```

## 3. 事件

> 目标：知道什么是事件 、知道事件三要素、能够用on的方式给一个元素注册事件  、会使用几种常见事件类型

### 3.1 事件概念

- **官方描述**：触发-响应的过程

- **大白话描述**：当用户某个页面元素进行某种操作（鼠标点击、划过）时，网页能够做出相应的回应

  ​                       比如：我们可以在用户点击某按钮时产生一个 事件，然后去执行某些操作

### 3.2 事件三要素

- **事件源**（谁，具体的哪个元素）
- **事件类型**（监控用户对这个元素的某种操作）
- **事件执行程序**（一旦用户对该元素有监控的行为，要干什么事情）

### 3.3 注册事件

- **步骤**
  
  - 获取具体的某个元素**对象**
  - 绑定某个类型的事件
  - 添加事件处理程序（采取函数赋值形式）
- **语法**：`事件源.on+事件类型 = 函数名 / 匿名函数`

- **事件处理函数中的this**：代表事件源（就是绑定事件的元素）

- **例子**

  ```html
  1. 创建一个div元素
  2. 通过 事件源.on+事件类型 = 函数名 / 匿名函数 语法给div元素绑定点击事件，在事件内部打印'我是div'
  ```

### 3.4 事件类型:

- **点击**：click

- **input获得焦点**：focus

- **input失去焦点**：blur

- **例子**

  ```html
  1. 创建一个input
  2. 给input元素添加获得焦点事件
  3. 在事件处理程序中打印'获得焦点
  4. 给input元素添加失去焦点事件
  5. 在事件处理程序中打印'失去焦点
  ```
  

## 4.  操作元素标准属性

> 目标：能够通过操作元素的标准属性，完成对网页样式、内容的修改

* **操作元素属性步骤**：① 获取需要操作的元素 ② 操作元素的属性
* **标准属性**：元素自带的属性 （可读可写）
* **获取语法**：`element.属性名`
* **设置语法**：`element.属性名 = ‘属性值’`

#### 4.1 操作元素内容

* **普通元素内容设置**（div 、p、span、a.....）
  * `element.innerHTML = '内容' `**识别标签、空格  经常使用**`
  * `element.innerText = '内容'`   
* **表单元素**   (input、textarea)
  * `element.value = '内容'`

```html
1. 验证普通元素内容设置
  1> 创建一个p标签，内容是‘我是p标签’
  2> 点击p标签之后，将p标签的内容通过两种方式修改成，‘我是修改后的p标签’


  3> 验证设置普通元素内容两种方式的区别,通过两种方式，将元素的内容设置成
	 '<a href='https://www.baidu.com/'>百度</a>'
2. 验证表单元素的内容设置
  1> 创建一个input,设置表单的默认值是‘我是默认值’
  2> 当input获得焦点时，清空input框
  3> 当input失去焦点时,如果input内容为空，则将表单内容设置成‘我是默认值’

```

#### 4.2 操作元素样式

* 操作style属性，修改行内样式，**优先级高**

  * `element.style = 'css属性名1:属性值；css属性名2：属性值'`

  ```
  div.style = 'background-color: red; color: green';
  ```

  * `element.style.css属性名 = '属性值'`  **设置单个样式 **   如果样式用-连接 则需要用驼峰方式设置

  ```
  div.style.backgroundColor = 'red';
  ```

  * **案例：开关灯**（先两个按钮，再一个按钮）

    ```
    1. 创建button元素，按钮内容为'关灯'
    2. 给按钮添加点击事件
    3. 在事件处理程序中，判断当前button内容是否是'关灯'
       1> 是，将button内容修改成'开灯',修改body背景色为黑色
       2> 否，将button内容修改成'关灯',修改body背景色为白色
    ```

* 操作class属性，修改样式

  * `element.className = '类名1  类名2  类名3 '`  **设置多个样式**  **会刷新元素的class属性**

  * **案例**：**搜索历史提示**

  ```
  1. 还原案例样式，在style中创建两个class属性分别为.show{display:block}.hide{display:none}
  2. input获得焦点时，让提示信息元素的class属性为'show'
  3. input失去焦点时，让提示信息元素的class属性为'hide'
  ```

  * `element.classList`   **设置多个样式**
  
  * 添加类 `element.classList.add('类名1','类名2','类名3')`
  
  * 移除类 `element.classList.remove('类名1','类名2','类名3')`
  * 切换类 `element.classList.toggle('类名')`  :元素存在该属性删除该属性，不存在该属性添加该属性        
* **案例：搜索历史提示**


#### 4.3 操作元素常用属性

* `element.src = '属性值'`

* `element.disabled = true/false`

* `element.checked = true/false`

* **案例：切换图片**

  ```html
  1. 创建一个按钮元素，内容为切换图片，创建一个img元素，地址为'images/01.jpg'
  2. 第一次点击按钮，将图片地址切换为'images/02.jpg'，并将按钮设置为不可点击
  ```
  
* **案例**：**全选反选案例**

  ```
  1. 点击全选按钮，将其他复选框状态修改成全选按钮的状态
  2. 点击某个复选框按钮，控制全选按钮状态
     1> 当其他复选框选中个数和其他复选框总个数相同，全选按钮状态为true
     2> 当其他复选框选中个数和其他复选框总个数不相同，全选按钮状态为false
  ```

## 5. 操作元素自定义属性

> 目标：能够给元素添加自定义属性 、 能够获取自定义属性 ，完成数据传递

### 5.1 h5方法（不兼容ie6、ie7、ie8）

- **设置语法**：`<p data-自定义属性名 = '自定义属性值'></p>`

- 属性名想叫什么就叫什么,可以用多个 -连接   `<p data-名称-名称 = '自定义属性值'></p>`

- **获取语法**：`element.dataset.自定义属性名`

  - 如果属性名用多个-连接 ，获取时应将属性名以-为分割符，驼峰方式获取  

    ```
    1. 创建一个div元素，并让该元素有两个自定属性，分别为 index='1'  user-index='01'
    2. 获取div元素的这两个自定义属性
    ```

- **案例**：**切换战场**

  ```
  1. 创建四个按钮元素，内容为'海岛'、'雨林'、'沙漠'、'雪地'
  2. 获取四个按钮元素
  3. 给按钮元素添加点击事件
  4. 在事件处理程序中，修改img的src属性
  ```

### 5.2  无兼容性方法

- **设置语法**：`<p 自定义属性名 = '自定义属性值'></p>`
  - 属性名想叫什么就叫什么,可以用多个 -连接   `<p 名称-名称 = '自定义属性值'></p>
- **获取语法**：下个小节讲

```html
1. 创建一个div元素，并让该元素有两个自定属性，分别为 index='1'  user-index='01'
```

## 6. 操作元素所有（标准、自定义）属性

> 目标：能够操作元素的所有属性，包含无兼容性问题的自定义属性

### 6.1 获取元素属性

- **语法**：`element.getAttribute('属性名')`

- **参数**

  - 类型：字符串
  - 值：属性名

- **返回** 

  - 类型：字符串
  - 值：某个元素的某个属性值

- **例子**

  ```html
  1. 创建一个div，class属性是'div1'
     1> 用h5方式创建自定义属性index = 1
     2> 用无兼容性的方式添加自定义属性index = 01
  2. 使用element.getAttribute('属性名')语法：获取class属性以及两个自定义属性
  ```

### 6.2 设置元素属性

- **语法**：`element.setAttribute('属性名','属性值')`

- **参数**

  - 类型：字符串
  - 值：属性名   属性值

- **例子**

  ```html
  1. 创建一个div元素
  2. 使用element.setAttribute('属性名','属性值')设置以下属性
     1> class属性是'div1'
     2> 用h5方式创建自定义属性index = 1
     3> 用无兼容性的方式添加自定义属性index = 01
  ```

### 6.3 删除元素某个属性

- **语法**：`element.removeAttribute('属性名')`

- **参数**

  - 类型：字符串
  - 值：属性名

- **例子**

  ```html
  1. 创建一个div，class属性是'div1'
     1> 用h5方式创建自定义属性index = 1
     2> 用无兼容性的方式添加自定义属性index = 01
  2. 使用element.removeAttribute('属性名')语法：删除class属性以及两个自定义属性
  ```



**总结**：**DOM的API分类**：获取元素、操作元素属性、事件、操作节点